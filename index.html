<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Variable Wallet - 2025</title>
    <link rel="stylesheet" href="main.css">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@400;500;600&display=swap" rel="stylesheet">
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <script type="module" src="three-instance.js"></script>
    <script type="module" src="objConverter.js"></script>
    <script type="module" src="carousel.js"></script>
    <script type="module" src="converter.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400;1,500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Syncopate:wght@700&family=Audiowide&family=Chakra+Petch:wght@600&family=Oxanium:wght@600&family=Teko:wght@600&family=Exo+2:wght@600&family=Quantico:wght@700&family=Saira+Stencil+One&family=Wallpoet&family=Michroma&family=Bai+Jamjuree:wght@600&display=swap" rel="stylesheet">
</head>
<body>
    <div id="loading-overlay">
        <div class="loading-triangle"></div>
    </div>

    <nav class="main-nav">
        <div class="logo">
            <span>V</span>ariable 
            <span>W</span>allet
        </div>
        <div class="est-date">EST. 2024</div>
    </nav>

    <section id="model-carousel">
        <div class="light-beams"></div>

        <button class="nav-button prev">◀</button>
        <button class="nav-button next">▶</button>

        <div class="carousel-wrapper">
            <div class="carousel-viewport">
                <div class="carousel-track">
                    <!-- Slides will be generated here -->
                </div>
            </div>
        </div>

        <div class="carousel-navigation">
            <!-- Navigation markers will be generated here -->
        </div>
    </section>

    <script>
        fetch('./VW.obj')
            .then(response => {
                console.log('OBJ file status:', response.status);
                return response.text();
            })
    </script>

    <script>
        console.log('Document loaded');
        console.log('Checking file paths:', {
            styleSheet: document.querySelector('link[href="main.css"]'),
            objFile: 'VW.obj',
            track: document.querySelector('.carousel-track'),
            scripts: {
                threeInstance: document.querySelector('script[src="three-instance.js"]'),
                objConverter: document.querySelector('script[src="objConverter.js"]'),
                carousel: document.querySelector('script[src="carousel.js"]'),
                converter: document.querySelector('script[src="converter.js"]')
            }
        });
    </script>

    <script type="module">
        import { initializeModels } from './converter.js';
        
        window.addEventListener('load', async () => {
            console.log('Window loaded, starting initialization...');
            try {
                if (customElements.get('model-viewer')) {
                    console.log('model-viewer element is defined');
                    const success = await initializeModels();
                    console.log('Initialization result:', success);
                    
                    if (success) {
                        await new Promise(resolve => setTimeout(resolve, 1618));
                        
                        const loadingOverlay = document.getElementById('loading-overlay');
                        if (loadingOverlay) {
                            loadingOverlay.style.opacity = '0';
                            setTimeout(() => {
                                loadingOverlay.style.display = 'none';
                            }, 500);
                        }
                    }
                } else {
                    console.error('model-viewer element not defined');
                }
            } catch (error) {
                console.error('Initialization error:', error);
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fonts = [
                'Orbitron',      // Futuristic, technical
                'Syncopate',     // Sharp, geometric
                'Audiowide',     // Bold, digital
                'Chakra Petch',  // Technical, modern
                'Oxanium',       // Sci-fi, strong
                'Teko',          // Industrial, sturdy
                'Exo 2',         // Space-age, clean
                'Quantico',      // Military, precise
                'Saira Stencil One', // Industrial, strong
                'Wallpoet',      // Digital, unique
                'Michroma',      // Geometric, futuristic
                'Bai Jamjuree'   // Modern, technical
            ];
            
            const randomFont = fonts[Math.floor(Math.random() * fonts.length)];
            document.documentElement.style.setProperty('--logo-font', `'${randomFont}', sans-serif`);
        });
    </script>

    <model-viewer 
        id="${config.id}" 
        alt="${config.name}"
        camera-controls="true"
        auto-rotate="true"
        disable-tap=""
        camera-target="0 0 0"
        exposure="0.5"
        shadow-intensity="0"
        environment-image="neutral"
        camera-orbit="-30deg 75deg 105%"
        min-camera-orbit="auto auto 50%"
        max-camera-orbit="auto auto 150%"
        interaction-prompt="none"
        interpolation-decay="50"
        rotation-per-second="30deg">
    </model-viewer>
</body>
</html>